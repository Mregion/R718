<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Pompe √† Chaleur - R718</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg,#0f172a,#020617);
      color:#fff;
      min-height:100vh;
    }

    .page{padding:20px;max-width:1100px;margin:auto}
    h1{font-size:20px;margin:0 0 14px}

    /* LOGIN CARD */
    .login{
      max-width:460px;
      margin:110px auto;
      background:rgba(255,255,255,.08);
      padding:22px;
      border-radius:16px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(10px);
    }
    .loginTop{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:14px;
    }
    .logoWrap{
      width:64px;height:64px;
      border-radius:14px;
      background:rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      flex:0 0 64px;
    }
    .logoWrap img{
      width:100%;
      height:100%;
      object-fit:contain;
      background:transparent;
    }
    .loginTitle{
      margin:0;
      font-size:20px;
      line-height:1.15;
    }
    .subtitle{
      margin:6px 0 0;
      font-size:13px;
      color:#cbd5e1;
      line-height:1.35;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      color:#e5e7eb;
      font-size:12px;
      margin:10px 0 10px;
      border:1px solid rgba(255,255,255,.08);
    }

    input,button{
      width:100%;
      padding:12px;
      margin-top:10px;
      border-radius:10px;
      border:none;
      font-size:14px;
      box-sizing:border-box;
    }
    input{
      background: rgba(255,255,255,.92);
      outline: none;
    }
    button{
      background:#38bdf8;
      font-weight:bold;
      cursor:pointer;
    }
    button:hover{ filter: brightness(1.05); }

    .hint{
      margin-top:10px;
      font-size:12px;
      color:#9ca3af;
      text-align:center;
      line-height:1.35;
    }
    .footer{
      margin-top:14px;
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-size:11px;
      color:#9ca3af;
      flex-wrap:wrap;
    }
    .footer span{ white-space:nowrap; }

    /* HOME */
    .hero{
      margin-top:14px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      padding:16px;
      box-shadow:0 18px 50px rgba(0,0,0,.28);
    }
    .heroTitle{
      font-size:16px;
      margin:0 0 6px;
      color:#e2e8f0;
    }
    .heroTxt{
      margin:0;
      color:#cbd5e1;
      font-size:13px;
      line-height:1.45;
    }
    .kpis{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .kpi{
      flex:1 1 220px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
      border-radius:14px;
      padding:12px;
    }
    .kpi b{color:#e2e8f0}
    .kpi p{margin:6px 0 0;color:#cbd5e1;font-size:12px;line-height:1.35}

    .homeGrid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
      margin-top:14px;
    }
    .homeCard{
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      padding:14px;
      cursor:pointer;
      transition:transform .12s ease, background .12s ease;
    }
    .homeCard:hover{
      background:rgba(255,255,255,.14);
      transform:translateY(-2px);
    }
    .homeCardTop{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
    }
    .icon{
      width:36px;height:36px;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(56,189,248,.14);
      border:1px solid rgba(56,189,248,.25);
    }
    .homeCard h3{
      margin:0;
      font-size:14px;
      color:#e2e8f0;
    }
    .homeCard p{
      margin:0;
      font-size:12px;
      color:#cbd5e1;
      line-height:1.35;
    }
    .smallNote{
      margin-top:14px;
      color:#9ca3af;
      font-size:11px;
    }

    /* SECTIONS */
    .back{margin-bottom:15px;cursor:pointer;color:#7dd3fc}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .box{background:rgba(255,255,255,.08);border-radius:14px;padding:12px}
    .box h3{margin:0 0 8px;font-size:14px;color:#e2e8f0}
    img{width:100%;height:220px;object-fit:contain;background:rgba(0,0,0,.25);border-radius:10px}
    .txt{color:#cbd5e1;font-size:13px;line-height:1.45;margin-top:8px}
    model-viewer{width:100%;height:420px;background:#111;border-radius:12px;margin-top:15px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.08);color:#cbd5e1;font-size:12px;margin-bottom:10px}

    /* ‚úÖ MORPH IMAGE (BO√éTE) */
    .morphImg{
      position:relative;
      width:100%;
      height:220px;
      border-radius:10px;
      overflow:hidden;
      background:rgba(0,0,0,.25);
    }
    .morphImg img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain;
      transition:opacity .35s ease, transform .35s ease;
      background:transparent;
      border-radius:0;
    }
    .morphImg .overlay{
      opacity:0;
      transform:scale(1.02);
    }
    .morphImg:hover .overlay{
      opacity:1;
      transform:scale(1);
    }
    .morphImg:hover .base{
      opacity:0.15;
    }
    .morphHint{
      position:absolute;
      bottom:8px;
      right:8px;
      font-size:11px;
      color:#e5e7eb;
      background:rgba(0,0,0,.45);
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      user-select:none;
    }
  </style>
</head>

<body>
  <div id="app"></div>

  <script>
    const PASSWORD = "IssaR718";
    let state = "login";

    // ‚ö†Ô∏è Mets ici le nom exact de ton logo (dans ASSETS/)
    const LOGO_SRC = "ASSETS/logo.jfif";

    const slides = {
      diaphragm: [
        { title:"Vue assembl√©e", img:"ASSETS/diaphragm_1.png", txt:"Pr√©sentation de l‚Äôensemble et interfaces." },
        { title:"Vue int√©rieure", img:"ASSETS/diaphragm_2.png", txt:"√âl√©ments internes / volume utile." },
        { title:"Diaphragm (photo)", img:"ASSETS/diaphragm_photo.png", txt:"Diaphragm ‚Äì r√¥le + r√©glage (√† d√©tailler si besoin)." },
      ],
      boite: [
        // ‚úÖ Slide morph (base + overlay)
        { title:"Bo√Æte ‚Üí CFD (morph)", morph:true, base:"ASSETS/boite_cuve.png", overlay:"ASSETS/cfd_velocity.png",
          txt:"Survol/tap pour passer de la vue g√©om√©trique √† l‚Äôoverlay CFD (vitesse)." },

        { title:"√âchangeur √† ailettes", img:"ASSETS/echangeur_fins.png", txt:"Dimensions et orientation (20√ó20\")." },
        { title:"CFD ‚Äì pression + streamlines", img:"ASSETS/cfd_pressure_streamlines.png", txt:"Lecture des pertes et structures d‚Äô√©coulement." },
        { title:"CFD ‚Äì temp√©rature", img:"ASSETS/cfd_temperature.png", txt:"Distribution thermique qualitative." },
      ],
      capteur: [
        { title:"Principe ŒîP (visuel CFD)", img:"ASSETS/cfd_pressure_streamlines.png", txt:"Base pour positionnement des prises de pression." },
        { title:"Justification (vitesse)", img:"ASSETS/cfd_velocity.png", txt:"√âviter zones de recirculation non repr√©sentatives." },
      ],
      turbo: [
        { title:"Vue d‚Äôensemble turbo", img:"ASSETS/turbo_exploded.png", txt:"Architecture et int√©gration dans le banc." },
        { title:"Diaphragm ‚Äì r√©glage", img:"ASSETS/diaphragm_photo.png", txt:"Pi√®ce de r√©glage influen√ßant les conditions d‚Äô√©coulement." },
      ]
    };

    function renderSlides(key){
      const arr = slides[key] || [];
      return `
        <div class="grid">
          ${arr.map(s => `
            <div class="box">
              <h3>${s.title}</h3>

              ${s.morph ? `
                <div class="morphImg" title="Survol/tap pour voir l'overlay CFD">
                  <img class="base" src="${s.base}" alt="${s.title}"
                       onerror="this.style.display='none'; this.parentElement.nextElementSibling.style.display='block';" />
                  <img class="overlay" src="${s.overlay}" alt="Overlay CFD"
                       onerror="this.style.display='none'; this.parentElement.nextElementSibling.style.display='block';" />
                  <span class="morphHint">Survol : CFD</span>
                </div>
              ` : `
                <img src="${s.img}" alt="${s.title}"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />
              `}

              <div class="txt">${s.txt}</div>

              <div class="txt" style="display:none;color:#fb7185">
                Image introuvable.<br/>
                V√©rifie <b>ASSETS/</b> et le nom du fichier (majuscules/minuscules).
              </div>
            </div>
          `).join("")}
        </div>
      `;
    }

    function render(){
      const app = document.getElementById("app");

      if(state==="login"){
        app.innerHTML = `
          <div class="login">
            <div class="loginTop">
              <div class="logoWrap">
                <img src="${LOGO_SRC}" alt="Logo projet R718"
                  onerror="this.style.display='none'; this.parentElement.style.background='rgba(255,255,255,.06)';" />
              </div>
              <div>
                <h1 class="loginTitle">Pompe √† Chaleur ‚Äì R718</h1>
                <p class="subtitle">Prototype exp√©rimental √† turbocompresseur refroidi</p>
              </div>
            </div>

            <div class="badge">üîí Acc√®s technique</div>

            <input id="pw" type="password" placeholder="Mot de passe" />
            <button onclick="check()">Entrer</button>

            <p id="err" style="color:#fb7185;display:none;margin-top:10px;text-align:center">
              Mot de passe incorrect
            </p>

            <p class="hint">R√©serv√© aux partenaires et encadrants du projet</p>

            <div class="footer">
              <span>Projet R718 ‚Äì Banc exp√©rimental</span>
              <span>Version v1.0</span>
            </div>
          </div>
        `;
        return;
      }

      if(state==="home"){
        app.innerHTML = `
          <div class="page">
            <h1>Pompe √† Chaleur - R718</h1>

            <div class="hero">
              <div class="heroTitle">Pr√©sentation technique</div>
              <p class="heroTxt">
                Interface de d√©monstration du banc exp√©rimental R718 (eau) :
                turbocompresseur refroidi, bo√Æte de test et instrumentation ŒîP.
              </p>

              <div class="kpis">
                <div class="kpi">
                  <b>R√©frig√©rant : R718</b>
                  <p>Eau ‚Äì solution naturelle, compatible prototype labo.</p>
                </div>
                <div class="kpi">
                  <b>Refroidissement turbo</b>
                  <p>Stator ‚Ä¢ Rotor ‚Ä¢ Inter-√©tage (3 cycles de refroidissement).</p>
                </div>
                <div class="kpi">
                  <b>Mesures & validation</b>
                  <p>CFD + capteur de pression diff√©rentielle (ŒîP).</p>
                </div>
              </div>
            </div>

            <div class="homeGrid">
              <div class="homeCard" onclick="state='turbo';render()">
                <div class="homeCardTop">
                  <div class="icon">üåÄ</div>
                  <h3>Turbo</h3>
                </div>
                <p>Vue 3D + slides : architecture, refroidissements, spray cooling.</p>
              </div>

              <div class="homeCard" onclick="state='boite';render()">
                <div class="homeCardTop">
                  <div class="icon">üì¶</div>
                  <h3>Bo√Æte</h3>
                </div>
                <p>Enveloppe, √©changeur √† ailettes et r√©sultats CFD (morph overlay).</p>
              </div>

              <div class="homeCard" onclick="state='diaphragm';render()">
                <div class="homeCardTop">
                  <div class="icon">‚öôÔ∏è</div>
                  <h3>Diaphragm</h3>
                </div>
                <p>Vue assembl√©e, vue int√©rieure et photo de la pi√®ce.</p>
              </div>

              <div class="homeCard" onclick="state='capteur';render()">
                <div class="homeCardTop">
                  <div class="icon">üìê</div>
                  <h3>Capteur ŒîP</h3>
                </div>
                <p>Principe, positionnement des prises et justification via CFD.</p>
              </div>
            </div>

            <div class="smallNote">
              Astuce : sur mobile, pincer pour zoomer la 3D et glisser pour tourner.
            </div>
          </div>
        `;
        return;
      }

      if(state==="turbo"){
        app.innerHTML = `
          <div class="page">
            <div class="back" onclick="state='home';render()">‚Üê Retour</div>
            <h1>Turbo</h1>
            <div class="pill">Vue 3D + Slides</div>

            <model-viewer
              src="turbo_web.glb"
              camera-controls
              auto-rotate
              environment-image="neutral"
              exposure="1.1"
              shadow-intensity="0.8"
              style="width:100%; height:420px; background:#111; border-radius:12px;">
            </model-viewer>

            <div class="txt">Si la 3D ne s‚Äôaffiche pas, v√©rifie que <b>turbo_web.glb</b> est √† c√¥t√© de <b>index.html</b>.</div>

            <h1 style="font-size:16px;margin-top:18px">Slides</h1>
            ${renderSlides("turbo")}
          </div>
        `;
        return;
      }

      app.innerHTML = `
        <div class="page">
          <div class="back" onclick="state='home';render()">‚Üê Retour</div>
          <h1>${state.toUpperCase()}</h1>
          ${renderSlides(state)}
        </div>
      `;
    }

    function check(){
      const pwEl = document.getElementById("pw");
      const pw = pwEl.value;

      if(pw === PASSWORD){
        state = "home";
        render();
      } else {
        document.getElementById("err").style.display = "block";
        pwEl.focus();
        pwEl.select();
      }
    }

    render();
  </script>
</body>
</html>
