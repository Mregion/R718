<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Pompe √† Chaleur - R718</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    body{margin:0;font-family:Arial,sans-serif;background:linear-gradient(135deg,#0f172a,#020617);color:#fff}
    .page{padding:20px;max-width:1100px;margin:auto}
    h1{font-size:20px;margin:0 0 14px}
    .login{max-width:420px;margin:120px auto;background:rgba(255,255,255,.08);padding:20px;border-radius:12px}
    input,button{width:100%;padding:12px;margin-top:10px;border-radius:8px;border:none;font-size:14px}
    button{background:#38bdf8;font-weight:bold;cursor:pointer}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:14px;margin-top:14px}
    .card{background:rgba(255,255,255,.1);padding:16px;border-radius:14px;cursor:pointer}
    .card:hover{background:rgba(255,255,255,.18)}
    .back{margin-bottom:15px;cursor:pointer;color:#7dd3fc}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .box{background:rgba(255,255,255,.08);border-radius:14px;padding:12px}
    .box h3{margin:0 0 8px;font-size:14px;color:#e2e8f0}
    img{width:100%;height:220px;object-fit:contain;background:rgba(0,0,0,.25);border-radius:10px}
    .txt{color:#cbd5e1;font-size:13px;line-height:1.45;margin-top:8px}
    model-viewer{width:100%;height:420px;background:#111;border-radius:12px;margin-top:15px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.08);color:#cbd5e1;font-size:12px;margin-bottom:10px}
  </style>
</head>

<body>
<div id="app"></div>

<script>
const PASSWORD = "0";
let state = "login";

const slides = {
  diaphragm: [
    { title:"Vue assembl√©e", img:"ASSETS/diaphragm_1.png", txt:"Pr√©sentation de l‚Äôensemble et interfaces." },
    { title:"Vue int√©rieure", img:"ASSETS/diaphragm_2.png", txt:"√âl√©ments internes / volume utile." },
    { title:"Diaphragm (photo)", img:"ASSETS/diaphragm_photo.png", txt:"Diaphragm ‚Äì r√¥le + r√©glage (√† d√©tailler si besoin)." },
  ],
  boite: [
    { title:"Bo√Æte ‚Äì vue globale", img:"ASSETS/boite_cuve.png", txt:"Enveloppe et implantation g√©n√©rale." },
    { title:"√âchangeur √† ailettes", img:"ASSETS/echangeur_fins.png", txt:"Dimensions et orientation (20√ó20\")." },
    { title:"CFD ‚Äì vitesse", img:"ASSETS/cfd_velocity.png", txt:"Zones de jet / recirculations." },
    { title:"CFD ‚Äì pression + streamlines", img:"ASSETS/cfd_pressure_streamlines.png", txt:"Lecture des pertes et structures d‚Äô√©coulement." },
    { title:"CFD ‚Äì temp√©rature", img:"ASSETS/cfd_temperature.png", txt:"Distribution thermique qualitative." },
  ],
  capteur: [
    { title:"Principe ŒîP (visuel CFD)", img:"ASSETS/cfd_pressure_streamlines.png", txt:"Base pour positionnement des prises de pression." },
    { title:"Justification (vitesse)", img:"ASSETS/cfd_velocity.png", txt:"√âviter zones de recirculation non repr√©sentatives." },
  ],
  turbo: [
    { title:"Vue d‚Äôensemble turbo", img:"ASSETS/turbo_exploded.png", txt:"Architecture et int√©gration dans le banc." },
    { title:"Diaphragm ‚Äì r√©glage", img:"ASSETS/diaphragm_photo.png", txt:"Pi√®ce de r√©glage influen√ßant les conditions d‚Äô√©coulement." },
  ]
};

function renderSlides(key){
  const arr = slides[key] || [];
  return `
    <div class="grid">
      ${arr.map(s => `
        <div class="box">
          <h3>${s.title}</h3>
          <img src="${s.img}" alt="${s.title}"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" />
          <div class="txt">${s.txt}</div>
          <div class="txt" style="display:none;color:#fb7185">
            Image introuvable: <b>${s.img}</b><br/>
            V√©rifie le dossier <b>ASSETS/</b> et le nom du fichier (majuscules/minuscules).
          </div>
        </div>
      `).join("")}
    </div>
  `;
}

function render(){
  const app = document.getElementById("app");

  if(state==="login"){
    app.innerHTML = `
      <div class="login">
        <h1>Pompe √† Chaleur - R718</h1>
        <p class="pill">Acc√®s restreint</p>
        <input id="pw" type="password" placeholder="Mot de passe" />
        <button onclick="check()">Entrer</button>
        <p id="err" style="color:#fb7185;display:none;margin-top:10px">Mot de passe incorrect</p>
      </div>
    `;
    return;
  }

  if(state==="home"){
    app.innerHTML = `
      <div class="page">
        <h1>Pompe √† Chaleur - R718</h1>
        <div class="cards">
          <div class="card" onclick="state='turbo';render()">üåÄ Turbo</div>
          <div class="card" onclick="state='boite';render()">üì¶ Bo√Æte</div>
          <div class="card" onclick="state='diaphragm';render()">‚öôÔ∏è Diaphragm</div>
          <div class="card" onclick="state='capteur';render()">üìê Capteur P diff</div>
        </div>
      </div>
    `;
    return;
  }

  if(state==="turbo"){
    app.innerHTML = `
      <div class="page">
        <div class="back" onclick="state='home';render()">‚Üê Retour</div>
        <h1>Turbo</h1>
        <div class="pill">Vue 3D + Slides</div>

<model-viewer
  src="turbo.glb"
  camera-controls
  auto-rotate
  environment-image="neutral"
  exposure="1.2"
  shadow-intensity="0.9"
  camera-orbit="0deg 75deg 2.5m"
  min-camera-orbit="auto auto 0.1m"
  max-camera-orbit="auto auto 10m"
  field-of-view="45deg"
  style="
    width:100%;
    height:420px;
    background:#111;
    border-radius:12px;
  ">
</model-viewer>
        <div class="txt">Si la 3D ne s‚Äôaffiche pas, mets <b>turbo.glb</b> √† c√¥t√© de <b>index.html</b>.</div>

        <h1 style="font-size:16px;margin-top:18px">Slides</h1>
        ${renderSlides("turbo")}
      </div>
    `;
    return;
  }

  app.innerHTML = `
    <div class="page">
      <div class="back" onclick="state='home';render()">‚Üê Retour</div>
      <h1>${state.toUpperCase()}</h1>
      ${renderSlides(state)}
    </div>
  `;
}

function check(){
  const pw = document.getElementById("pw").value;
  if(pw===PASSWORD){ state="home"; render(); }
  else document.getElementById("err").style.display="block";
}

render();
</script>
</body>
</html>

